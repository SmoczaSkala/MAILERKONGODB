{"ast":null,"code":"// import React, { useState } from \"react\";\n// import \"./Login.scss\";\n// import { useNavigate } from \"react-router-dom\";\n// import axios from \"axios\";\n\n// const Login = () => {\n//   const navigate = useNavigate();\n//   const [login, setLogin] = useState(\"\");\n//   const [password, setPassword] = useState(\"\");\n//   const [error, setError] = useState(\"\");\n\n//   const loginFn = async () => {\n//     try {\n//       if (login && password) {\n//         const credentials = { email: login, password };\n//         const response = await axios.post(\"/api/user/login\", credentials);\n//         const data = response.data;\n\n//         if (data.success && data.token) {\n//           sessionStorage.setItem(\"token\", data.token);\n//           navigate(`/dashboard/`);\n//         } else {\n//           setError(\"Błąd logowania. Sprawdź poprawność danych.\");\n//         }\n//       } else {\n//         setError(\"Wprowadź login i hasło.\");\n//       }\n//     } catch (error) {\n//       console.error(\"Błąd logowania:\", error);\n//       setError(\"Wystąpił błąd podczas logowania.\");\n//     }\n//   };\n\n//   return (\n//     <div className=\"login-container\">\n//       <div className=\"form\">\n//         <h2>Login</h2>\n//         <form>\n//           <input\n//             type=\"text\"\n//             placeholder=\"Login\"\n//             value={login}\n//             onChange={(e) => setLogin(e.target.value)}\n//           />\n//           <input\n//             type=\"password\"\n//             placeholder=\"Hasło\"\n//             value={password}\n//             onChange={(e) => setPassword(e.target.value)}\n//           />\n//           <button type=\"button\" onClick={loginFn}>\n//             Zaloguj\n//           </button>\n//           {error && <p className=\"error-message\">{error}</p>}\n//         </form>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default Login;\n\nconst loginFn = async () => {\n  try {\n    if (login && password) {\n      const credentials = {\n        email: login,\n        password\n      };\n      const response = await axios.post(\"/api/user/login\", credentials);\n      const data = response.data;\n      if (data.success && data.token) {\n        // Ustawienie tokena w nagłówku dla wszystkich kolejnych żądań\n        axios.defaults.headers.common[\"Authorization\"] = `Bearer ${data.token}`;\n        navigate(`/dashboard/`);\n      } else {\n        setError(\"Błąd logowania. Sprawdź poprawność danych.\");\n      }\n    } else {\n      setError(\"Wprowadź login i hasło.\");\n    }\n  } catch (error) {\n    console.error(\"Błąd logowania:\", error);\n    setError(\"Wystąpił błąd podczas logowania.\");\n  }\n};","map":{"version":3,"names":["loginFn","login","password","credentials","email","response","axios","post","data","success","token","defaults","headers","common","navigate","setError","error","console"],"sources":["C:/Users/kamil/OneDrive/Pulpit/mailbox/Mailer/Mailer/user_front/src/components/login/Login.jsx"],"sourcesContent":["// import React, { useState } from \"react\";\r\n// import \"./Login.scss\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n// import axios from \"axios\";\r\n\r\n// const Login = () => {\r\n//   const navigate = useNavigate();\r\n//   const [login, setLogin] = useState(\"\");\r\n//   const [password, setPassword] = useState(\"\");\r\n//   const [error, setError] = useState(\"\");\r\n\r\n//   const loginFn = async () => {\r\n//     try {\r\n//       if (login && password) {\r\n//         const credentials = { email: login, password };\r\n//         const response = await axios.post(\"/api/user/login\", credentials);\r\n//         const data = response.data;\r\n\r\n//         if (data.success && data.token) {\r\n//           sessionStorage.setItem(\"token\", data.token);\r\n//           navigate(`/dashboard/`);\r\n//         } else {\r\n//           setError(\"Błąd logowania. Sprawdź poprawność danych.\");\r\n//         }\r\n//       } else {\r\n//         setError(\"Wprowadź login i hasło.\");\r\n//       }\r\n//     } catch (error) {\r\n//       console.error(\"Błąd logowania:\", error);\r\n//       setError(\"Wystąpił błąd podczas logowania.\");\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"login-container\">\r\n//       <div className=\"form\">\r\n//         <h2>Login</h2>\r\n//         <form>\r\n//           <input\r\n//             type=\"text\"\r\n//             placeholder=\"Login\"\r\n//             value={login}\r\n//             onChange={(e) => setLogin(e.target.value)}\r\n//           />\r\n//           <input\r\n//             type=\"password\"\r\n//             placeholder=\"Hasło\"\r\n//             value={password}\r\n//             onChange={(e) => setPassword(e.target.value)}\r\n//           />\r\n//           <button type=\"button\" onClick={loginFn}>\r\n//             Zaloguj\r\n//           </button>\r\n//           {error && <p className=\"error-message\">{error}</p>}\r\n//         </form>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default Login;\r\n\r\nconst loginFn = async () => {\r\n  try {\r\n    if (login && password) {\r\n      const credentials = { email: login, password };\r\n      const response = await axios.post(\"/api/user/login\", credentials);\r\n      const data = response.data;\r\n\r\n      if (data.success && data.token) {\r\n        // Ustawienie tokena w nagłówku dla wszystkich kolejnych żądań\r\n        axios.defaults.headers.common[\"Authorization\"] = `Bearer ${data.token}`;\r\n        navigate(`/dashboard/`);\r\n      } else {\r\n        setError(\"Błąd logowania. Sprawdź poprawność danych.\");\r\n      }\r\n    } else {\r\n      setError(\"Wprowadź login i hasło.\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Błąd logowania:\", error);\r\n    setError(\"Wystąpił błąd podczas logowania.\");\r\n  }\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,MAAMA,OAAO,GAAG,MAAAA,CAAA,KAAY;EAC1B,IAAI;IACF,IAAIC,KAAK,IAAIC,QAAQ,EAAE;MACrB,MAAMC,WAAW,GAAG;QAAEC,KAAK,EAAEH,KAAK;QAAEC;MAAS,CAAC;MAC9C,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACC,IAAI,CAAC,iBAAiB,EAAEJ,WAAW,CAAC;MACjE,MAAMK,IAAI,GAAGH,QAAQ,CAACG,IAAI;MAE1B,IAAIA,IAAI,CAACC,OAAO,IAAID,IAAI,CAACE,KAAK,EAAE;QAC9B;QACAJ,KAAK,CAACK,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAI,UAASL,IAAI,CAACE,KAAM,EAAC;QACvEI,QAAQ,CAAE,aAAY,CAAC;MACzB,CAAC,MAAM;QACLC,QAAQ,CAAC,4CAA4C,CAAC;MACxD;IACF,CAAC,MAAM;MACLA,QAAQ,CAAC,yBAAyB,CAAC;IACrC;EACF,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;IACvCD,QAAQ,CAAC,kCAAkC,CAAC;EAC9C;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}